{"version":3,"sources":["webpack:///src/components/user/book/updateBook.vue","webpack:///./src/components/user/book/updateBook.vue?5f6e","webpack:///./src/components/user/book/updateBook.vue","webpack:///./src/components/user/book/updateBook.vue?e2a4","webpack:///./src/components/user/book/updateBook.vue?82d8"],"names":["updateBook","name","data","bookForm","code","userId","iSBN","bookName","author","imgurl","publisher","publishTime","price","discount","upDate","storage","tips","imgList","dialogImageUrl","dialogVisible","disabled","hideUploadAdd","filelist","limitCount","postion","components","pageheader","pagefooter","computed","newprice","val","this","Number","toFixed","realVal","substring","length","mounted","_this","bookId","$route","params","Object","api","then","res","console","log","imglist","split","Date","methods","formatDiscount","test","$message","type","message","showClose","newTransformBase64","list","callback","errorCallback","_this2","promise","forEach","item","index","p","promise_default","a","resolve","reject","reader","FileReader","obj","raw","readAsDataURL","onload","e","result","push","all","results","catch","error","handleAddChange","file","size","splice","handleExceed","handleRemove","_this3","uid","handlePictureCardPreview","url","submitForm","formname","_this4","bookparam","$store","state","user","$router","resetForm","formName","$refs","resetFields","render","_vm","_h","$createElement","_c","_self","attrs","direction","_v","staticClass","staticStyle","width","height","src","__webpack_require__","placeholder","ref","inline","label-position","model","status-icon","label-width","label","value","$$v","$set","expression","format","value-format","controls-position","min","max","on","change","slot","readonly","position","_l","img","key","float","margin-left","rows","class","hideUpload","action","multiple","list-type","file-list","auto-upload","on-change","on-exceed","on-remove","limit","scopedSlots","_u","fn","alt","click","$event","_e","visible","update:visible","_withStripped","esExports","staticRenderFns","book_updateBook","disposed","Component","normalizeComponent","ssrContext","options","__file","__webpack_exports__","content","module","i","locals","exports","version","sources","names","mappings","sourcesContent","sourceRoot"],"mappings":"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","file":"static/js/11.966dccfdab386710c70d.js","sourcesContent":["<template>\n  <div>\n    <el-container direction=\"vertical\">\n      <el-main><pageheader></pageheader></el-main>\n      <div class=\"banner\">\n        <el-container direction=\"horizontal\" class=\"search\">\n          <el-main>\n            <el-image :src=\"require('@/assets/img/logo.png')\" style=\"width: 230px;height: 88px\"></el-image>\n          </el-main>\n          <el-container direction=\"vertical\">\n            <el-main class=\"search-input\">\n              <el-input placeholder=\"请输入内容\" style=\"width:320px\"></el-input> <el-button><span>搜索</span></el-button></el-main>\n            <el-main class=\"history\">\n              <ul class=\"history\">\n                <li class=\"his-li\">莫言</li>\n                <li class=\"his-li\">余光中</li>\n                <li class=\"his-li\">毛姆</li>\n                <li class=\"his-li\">追风筝的人</li>\n                <li class=\"his-li\">莫言</li>\n                <li class=\"his-li\">余光中</li>\n              </ul>\n\n            </el-main>\n          </el-container>\n        </el-container>\n      </div>\n      <div>\n    <el-form  :inline=\"true\" :label-position=\"postion\" :model=\"bookForm\" status-icon  ref=\"bookForm\" label-width=\"100px\" class=\"book-form\">\n          <el-form-item  label=\"ISBN\" class=\"\">\n            <el-input v-model=\"bookForm.iSBN\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"书名\">\n            <el-input v-model=\"bookForm.bookName\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"作者\">\n            <el-input v-model=\"bookForm.author\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"出版社\">\n            <el-input v-model=\"bookForm.publisher\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"出版日期\">\n            <el-date-picker\n              v-model=\"bookForm.publishTime\"\n              type=\"month\"\n              format=\"yyyy-MM\"\n              value-format=\"yyyy-MM-dd\"\n              placeholder=\"选择年月\">\n            </el-date-picker>\n          </el-form-item>\n          <el-form-item label=\"数量\">\n<!--            <el-input v-model.number=\"bookForm.storage\"></el-input>-->\n            <el-input-number v-model=\"bookForm.storage\" size=\"large\" controls-position=\"right\"  :min=\"1\" :max=\"999\" style=\"width: auto\">\n            </el-input-number>\n          </el-form-item>\n          <el-form-item label=\"单价\">\n            <el-input v-model=\"bookForm.price\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"折扣\">\n            <el-input v-model=\"bookForm.discount\" placeholder=\"请输入百分比折扣\" @change=\"formatDiscount\">\n              <template slot=\"append\">%</template>\n            </el-input>\n          </el-form-item>\n          <el-form-item label=\"现价\">\n            <el-input v-model=\"newprice\" readonly></el-input>\n          </el-form-item>\n      <el-form-item label=\"原描述图片\" style=\"position: relative\">\n        <div v-for=\"img in bookForm.imgurl\" :key=\"img.index\" style=\"float: left;margin-left: 20px\">\n<!--          <img-->\n<!--            class=\"el-upload-list__item-thumbnail\"-->\n<!--            :src=\"'http://localhost:8088/upload/'+img\" alt=\"\"-->\n<!--            >-->\n            <el-image\n              :src=\"'http://localhost:8088/upload/'+img\" style=\"width: 90px;height: 90px\"\n            ></el-image>\n        </div>\n      </el-form-item>\n\n      <el-form-item label=\"书本描述\">\n        <el-input\n          type=\"textarea\"\n          :rows=\"4\"\n          placeholder=\"几成新呢，描述下你的书吧\"\n          v-model=\"bookForm.tips\"\n          style=\"width: 280px;\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"修改描述图片\">\n        <el-upload\n          action=\"\"\n          multiple\n          list-type=\"picture-card\"\n          :file-list=\"filelist\"\n          :auto-upload=\"false\"\n          :class=\"{hideUpload:hideUploadAdd}\"\n          :on-change=\"handleAddChange\"\n          :on-exceed=\"handleExceed\"\n          :on-remove=\"handleRemove\"\n          :limit=\"limitCount\"\n        >\n          <i slot=\"default\" class=\"el-icon-plus\"></i>\n          <div class=\"el-upload__tip\" slot=\"tip\">（最多上传5张图片）</div>\n          <div slot=\"file\" slot-scope=\"{file}\">\n            <img\n              class=\"el-upload-list__item-thumbnail\"\n              :src=\"file.url\" alt=\"\"\n            >\n            <span class=\"el-upload-list__item-actions\">\n        <span\n          class=\"el-upload-list__item-preview\"\n          @click=\"handlePictureCardPreview(file)\"\n        >\n          <i class=\"el-icon-zoom-in\"></i>\n        </span>\n        <span\n          v-if=\"!disabled\"\n          class=\"el-upload-list__item-delete\"\n          @click=\"handleRemove(file)\"\n        >\n          <i class=\"el-icon-delete\"></i>\n        </span>\n      </span>\n          </div>\n        </el-upload>\n        <!--    放大图-->\n        <el-dialog :visible.sync=\"dialogVisible\">\n          <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\n        </el-dialog>\n      </el-form-item>\n      <el-form-item class=\"form-btn\">\n        <el-button type=\"primary\" @click=\"resetForm('bookForm')\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submitForm('bookForm')\">修 改</el-button>\n      </el-form-item>\n    </el-form>\n      </div>\n    <pagefooter></pagefooter>\n    </el-container>\n  </div>\n\n</template>\n\n<script>\n  import {findbookbyid,updatebook} from \"../../../axios/api\";\n  import pageheader from \"../../pageheader\";\n  import pagefooter from \"../../pagefooter\";\n\n    export default {\n        name: \"updatebook\",\n        data(){\n          return{\n            bookForm:{\n              code:'',\n              userId:'',\n              iSBN:'',\n              bookName:'',\n              author:'',\n              imgurl:'',\n              publisher:'',\n              publishTime:'',\n              price:'',\n              discount:'',\n              upDate:'',\n              storage:'',\n              tips:'',\n              imgList:[],\n            },\n            dialogImageUrl: '',\n            dialogVisible: false,\n            disabled: false,\n            hideUploadAdd:false,\n            filelist:[],\n            limitCount:4,\n            postion:'left'\n          }\n      },\n      components: {\n        pageheader,\n        pagefooter\n      },\n      computed:{\n        newprice:function () {\n          let val=this.bookForm.price*this.bookForm.discount*0.01\n          let price=Number(val).toFixed(3)\n          let realVal = price.substring(0, price.length - 1)\n          return  Number(realVal);\n        }\n      },\n        mounted() {\n           let bookId=this.$route.params.bookId;\n           findbookbyid(bookId).then(res=>{\n             if(res.data!=null){\n               console.log(res.data);\n               this.bookForm=res.data;\n               console.log(res.data.imgurl)\n               let imglist=res.data.imgurl.split(\",\")\n                this.bookForm.imgurl=imglist\n               //datepicker 只接受date()格式\n               this.bookForm.publishTime=new Date(this.bookForm.publishTime);\n             }\n           })\n\n        },\n      methods:{\n        formatDiscount(val){\n          const r = /^\\+?[1-9][0-9]*$/;//正整数\n          if(!r.test(val)){\n            this.$message({\n              type:\"warning\",\n              message:\"折扣输入格式有误\",\n              showClose:true\n            })\n          }\n        },\n        newTransformBase64(list, callback, errorCallback) {\n          let promise = [];\n          list.forEach((item, index) => {\n            let p = new Promise((resolve, reject) => {\n              let reader = new FileReader();\n              let obj;\n              if (item.raw) {\n                reader.readAsDataURL(item.raw);\n                reader.onload = function (e) {\n                  obj = reader.result;\n                  resolve(obj);\n                }\n              }\n            })\n            promise.push(p);\n          })\n\n          Promise.all(promise).then(results => {\n            callback(results);\n          }).catch(error => {\n            errorCallback && errorCallback();\n            this.$message.error(\"错误\");\n          });\n        },\n        // 上传change事件\n        handleAddChange(file){\n\n          // 图片大小限制\n          const isLt20M = file.size / 1024 / 1024 < 20;\n          if (!isLt20M) {\n            this.$message.error(\"上传图片大小不能超过 20MB!\");\n            this.filelist.splice(-1, 1);\n          } else {\n            this.filelist.push(file);\n          }\n          this.hideUploadAdd=this.filelist.length>=this.limitCount;\n        },\n\n        // 多选大于限制个数时做提示\n        handleExceed(file) {\n          // 上传文件>=限制个数时隐藏上传组件\n          this.hideUploadAdd=true;\n          this.$message({\n            message: \"上传文件超出限制个数！\",\n            type: \"warning\"\n          })\n\n\n        },\n        handleRemove(file) {\n          //从filelist当前图片uid\n          var list=this.filelist;\n          list.forEach((item,index)=>{\n            if(item.uid==file.uid){\n              console.log(\"uid配对\")\n              this.filelist.splice(index,1)\n            }\n          })\n          this.hideUploadAdd=this.filelist.length>=this.limitCount;\n        },\n        handlePictureCardPreview(file) {\n          this.dialogImageUrl = file.url;\n          this.dialogVisible = true;\n        },\n      submitForm(formname){\n          console.log(this.filelist)\n        this.newTransformBase64(this.filelist, (results) => {\n          this.bookForm.imgList=results;\n          var bookparam=this.bookForm;\n          this.bookForm.imgurl=null;\n          this.bookForm.publishTime=new Date(this.bookForm.publishTime);\n          this.bookForm.userId=this.$store.state.user.userId;//添加该书本的用户\n          console.log(this.$store.state.user.userId);\n          this.bookForm.code='10001';//图书类型id\n          var bookparam=this.bookForm;\n          updatebook(bookparam).then(res=>{\n            if(res.data!=0){\n              console.log(res.data)\n              this.$message({\n                showClose:true,\n                message:\"修改成功\",\n                type:'success'\n              })\n              //跳转到详情页\n              this.$router.push({\n                name:'bookdetail',\n                params:{\n                  bookId:res.data\n                }\n              })\n            }\n          })\n        })\n      },\n        resetForm(formName) {\n          this.$refs[formName].resetFields();\n        }\n      }\n    }\n</script>\n\n<style scoped>\n  .hideUpload /deep/ .el-upload{\n    display: none;\n  }\n\n  .form-btn{\n   margin-left:200px\n  }\n  .form-btn>>>.el-button--primary{\n    background-color: #E0B41B;\n    border: 1px solid #E0B41B;\n    margin-left: 80px;\n    width: 120px;\n  }\n  /deep/ .el-form-item .el-input{\n    width: 280px;\n    margin: 0 auto;\n  }\n  .book-form{\n    width: 1000px;\n    margin: 0 auto;\n    margin-top: 30px;\n\n  }\n\n  .search{\n    width: 1224px;\n    margin: 0 auto;\n  }\n  .history{\n    position: relative;\n    margin-left: 210px;\n    padding-top: 0px;\n  }\n  .his-li{\n    float: left;\n    color: #333333;\n    font-size: 12pt;\n    margin-left: 8px;\n    opacity: 0.8;\n  }\n  .banner{\n    width: 100%;\n    background-color: #E9EBE7;\n    border: 1px solid #E9EBE7;\n  }\n  .search-input{\n    margin-left:450px;\n    margin-top: 2px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/user/book/updateBook.vue","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    [\n      _c(\n        \"el-container\",\n        { attrs: { direction: \"vertical\" } },\n        [\n          _c(\"el-main\", [_c(\"pageheader\")], 1),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            { staticClass: \"banner\" },\n            [\n              _c(\n                \"el-container\",\n                { staticClass: \"search\", attrs: { direction: \"horizontal\" } },\n                [\n                  _c(\n                    \"el-main\",\n                    [\n                      _c(\"el-image\", {\n                        staticStyle: { width: \"230px\", height: \"88px\" },\n                        attrs: { src: require(\"@/assets/img/logo.png\") }\n                      })\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-container\",\n                    { attrs: { direction: \"vertical\" } },\n                    [\n                      _c(\n                        \"el-main\",\n                        { staticClass: \"search-input\" },\n                        [\n                          _c(\"el-input\", {\n                            staticStyle: { width: \"320px\" },\n                            attrs: { placeholder: \"请输入内容\" }\n                          }),\n                          _vm._v(\" \"),\n                          _c(\"el-button\", [_c(\"span\", [_vm._v(\"搜索\")])])\n                        ],\n                        1\n                      ),\n                      _vm._v(\" \"),\n                      _c(\"el-main\", { staticClass: \"history\" }, [\n                        _c(\"ul\", { staticClass: \"history\" }, [\n                          _c(\"li\", { staticClass: \"his-li\" }, [_vm._v(\"莫言\")]),\n                          _vm._v(\" \"),\n                          _c(\"li\", { staticClass: \"his-li\" }, [\n                            _vm._v(\"余光中\")\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\"li\", { staticClass: \"his-li\" }, [_vm._v(\"毛姆\")]),\n                          _vm._v(\" \"),\n                          _c(\"li\", { staticClass: \"his-li\" }, [\n                            _vm._v(\"追风筝的人\")\n                          ]),\n                          _vm._v(\" \"),\n                          _c(\"li\", { staticClass: \"his-li\" }, [_vm._v(\"莫言\")]),\n                          _vm._v(\" \"),\n                          _c(\"li\", { staticClass: \"his-li\" }, [\n                            _vm._v(\"余光中\")\n                          ])\n                        ])\n                      ])\n                    ],\n                    1\n                  )\n                ],\n                1\n              )\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\n            \"div\",\n            [\n              _c(\n                \"el-form\",\n                {\n                  ref: \"bookForm\",\n                  staticClass: \"book-form\",\n                  attrs: {\n                    inline: true,\n                    \"label-position\": _vm.postion,\n                    model: _vm.bookForm,\n                    \"status-icon\": \"\",\n                    \"label-width\": \"100px\"\n                  }\n                },\n                [\n                  _c(\n                    \"el-form-item\",\n                    { attrs: { label: \"ISBN\" } },\n                    [\n                      _c(\"el-input\", {\n                        model: {\n                          value: _vm.bookForm.iSBN,\n                          callback: function($$v) {\n                            _vm.$set(_vm.bookForm, \"iSBN\", $$v)\n                          },\n                          expression: \"bookForm.iSBN\"\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    { attrs: { label: \"书名\" } },\n                    [\n                      _c(\"el-input\", {\n                        model: {\n                          value: _vm.bookForm.bookName,\n                          callback: function($$v) {\n                            _vm.$set(_vm.bookForm, \"bookName\", $$v)\n                          },\n                          expression: \"bookForm.bookName\"\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    { attrs: { label: \"作者\" } },\n                    [\n                      _c(\"el-input\", {\n                        model: {\n                          value: _vm.bookForm.author,\n                          callback: function($$v) {\n                            _vm.$set(_vm.bookForm, \"author\", $$v)\n                          },\n                          expression: \"bookForm.author\"\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    { attrs: { label: \"出版社\" } },\n                    [\n                      _c(\"el-input\", {\n                        model: {\n                          value: _vm.bookForm.publisher,\n                          callback: function($$v) {\n                            _vm.$set(_vm.bookForm, \"publisher\", $$v)\n                          },\n                          expression: \"bookForm.publisher\"\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    { attrs: { label: \"出版日期\" } },\n                    [\n                      _c(\"el-date-picker\", {\n                        attrs: {\n                          type: \"month\",\n                          format: \"yyyy-MM\",\n                          \"value-format\": \"yyyy-MM-dd\",\n                          placeholder: \"选择年月\"\n                        },\n                        model: {\n                          value: _vm.bookForm.publishTime,\n                          callback: function($$v) {\n                            _vm.$set(_vm.bookForm, \"publishTime\", $$v)\n                          },\n                          expression: \"bookForm.publishTime\"\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    { attrs: { label: \"数量\" } },\n                    [\n                      _c(\"el-input-number\", {\n                        staticStyle: { width: \"auto\" },\n                        attrs: {\n                          size: \"large\",\n                          \"controls-position\": \"right\",\n                          min: 1,\n                          max: 999\n                        },\n                        model: {\n                          value: _vm.bookForm.storage,\n                          callback: function($$v) {\n                            _vm.$set(_vm.bookForm, \"storage\", $$v)\n                          },\n                          expression: \"bookForm.storage\"\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    { attrs: { label: \"单价\" } },\n                    [\n                      _c(\"el-input\", {\n                        model: {\n                          value: _vm.bookForm.price,\n                          callback: function($$v) {\n                            _vm.$set(_vm.bookForm, \"price\", $$v)\n                          },\n                          expression: \"bookForm.price\"\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    { attrs: { label: \"折扣\" } },\n                    [\n                      _c(\n                        \"el-input\",\n                        {\n                          attrs: { placeholder: \"请输入百分比折扣\" },\n                          on: { change: _vm.formatDiscount },\n                          model: {\n                            value: _vm.bookForm.discount,\n                            callback: function($$v) {\n                              _vm.$set(_vm.bookForm, \"discount\", $$v)\n                            },\n                            expression: \"bookForm.discount\"\n                          }\n                        },\n                        [_c(\"template\", { slot: \"append\" }, [_vm._v(\"%\")])],\n                        2\n                      )\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    { attrs: { label: \"现价\" } },\n                    [\n                      _c(\"el-input\", {\n                        attrs: { readonly: \"\" },\n                        model: {\n                          value: _vm.newprice,\n                          callback: function($$v) {\n                            _vm.newprice = $$v\n                          },\n                          expression: \"newprice\"\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    {\n                      staticStyle: { position: \"relative\" },\n                      attrs: { label: \"原描述图片\" }\n                    },\n                    _vm._l(_vm.bookForm.imgurl, function(img) {\n                      return _c(\n                        \"div\",\n                        {\n                          key: img.index,\n                          staticStyle: { float: \"left\", \"margin-left\": \"20px\" }\n                        },\n                        [\n                          _c(\"el-image\", {\n                            staticStyle: { width: \"90px\", height: \"90px\" },\n                            attrs: {\n                              src: \"http://localhost:8088/upload/\" + img\n                            }\n                          })\n                        ],\n                        1\n                      )\n                    }),\n                    0\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    { attrs: { label: \"书本描述\" } },\n                    [\n                      _c(\"el-input\", {\n                        staticStyle: { width: \"280px\" },\n                        attrs: {\n                          type: \"textarea\",\n                          rows: 4,\n                          placeholder: \"几成新呢，描述下你的书吧\"\n                        },\n                        model: {\n                          value: _vm.bookForm.tips,\n                          callback: function($$v) {\n                            _vm.$set(_vm.bookForm, \"tips\", $$v)\n                          },\n                          expression: \"bookForm.tips\"\n                        }\n                      })\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    { attrs: { label: \"修改描述图片\" } },\n                    [\n                      _c(\n                        \"el-upload\",\n                        {\n                          class: { hideUpload: _vm.hideUploadAdd },\n                          attrs: {\n                            action: \"\",\n                            multiple: \"\",\n                            \"list-type\": \"picture-card\",\n                            \"file-list\": _vm.filelist,\n                            \"auto-upload\": false,\n                            \"on-change\": _vm.handleAddChange,\n                            \"on-exceed\": _vm.handleExceed,\n                            \"on-remove\": _vm.handleRemove,\n                            limit: _vm.limitCount\n                          },\n                          scopedSlots: _vm._u([\n                            {\n                              key: \"file\",\n                              fn: function(ref) {\n                                var file = ref.file\n                                return _c(\"div\", {}, [\n                                  _c(\"img\", {\n                                    staticClass:\n                                      \"el-upload-list__item-thumbnail\",\n                                    attrs: { src: file.url, alt: \"\" }\n                                  }),\n                                  _vm._v(\" \"),\n                                  _c(\n                                    \"span\",\n                                    {\n                                      staticClass:\n                                        \"el-upload-list__item-actions\"\n                                    },\n                                    [\n                                      _c(\n                                        \"span\",\n                                        {\n                                          staticClass:\n                                            \"el-upload-list__item-preview\",\n                                          on: {\n                                            click: function($event) {\n                                              return _vm.handlePictureCardPreview(\n                                                file\n                                              )\n                                            }\n                                          }\n                                        },\n                                        [\n                                          _c(\"i\", {\n                                            staticClass: \"el-icon-zoom-in\"\n                                          })\n                                        ]\n                                      ),\n                                      _vm._v(\" \"),\n                                      !_vm.disabled\n                                        ? _c(\n                                            \"span\",\n                                            {\n                                              staticClass:\n                                                \"el-upload-list__item-delete\",\n                                              on: {\n                                                click: function($event) {\n                                                  return _vm.handleRemove(file)\n                                                }\n                                              }\n                                            },\n                                            [\n                                              _c(\"i\", {\n                                                staticClass: \"el-icon-delete\"\n                                              })\n                                            ]\n                                          )\n                                        : _vm._e()\n                                    ]\n                                  )\n                                ])\n                              }\n                            }\n                          ])\n                        },\n                        [\n                          _c(\"i\", {\n                            staticClass: \"el-icon-plus\",\n                            attrs: { slot: \"default\" },\n                            slot: \"default\"\n                          }),\n                          _vm._v(\" \"),\n                          _c(\n                            \"div\",\n                            {\n                              staticClass: \"el-upload__tip\",\n                              attrs: { slot: \"tip\" },\n                              slot: \"tip\"\n                            },\n                            [_vm._v(\"（最多上传5张图片）\")]\n                          )\n                        ]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"el-dialog\",\n                        {\n                          attrs: { visible: _vm.dialogVisible },\n                          on: {\n                            \"update:visible\": function($event) {\n                              _vm.dialogVisible = $event\n                            }\n                          }\n                        },\n                        [\n                          _c(\"img\", {\n                            attrs: {\n                              width: \"100%\",\n                              src: _vm.dialogImageUrl,\n                              alt: \"\"\n                            }\n                          })\n                        ]\n                      )\n                    ],\n                    1\n                  ),\n                  _vm._v(\" \"),\n                  _c(\n                    \"el-form-item\",\n                    { staticClass: \"form-btn\" },\n                    [\n                      _c(\n                        \"el-button\",\n                        {\n                          attrs: { type: \"primary\" },\n                          on: {\n                            click: function($event) {\n                              return _vm.resetForm(\"bookForm\")\n                            }\n                          }\n                        },\n                        [_vm._v(\"取 消\")]\n                      ),\n                      _vm._v(\" \"),\n                      _c(\n                        \"el-button\",\n                        {\n                          attrs: { type: \"primary\" },\n                          on: {\n                            click: function($event) {\n                              return _vm.submitForm(\"bookForm\")\n                            }\n                          }\n                        },\n                        [_vm._v(\"修 改\")]\n                      )\n                    ],\n                    1\n                  )\n                ],\n                1\n              )\n            ],\n            1\n          ),\n          _vm._v(\" \"),\n          _c(\"pagefooter\")\n        ],\n        1\n      )\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n    require(\"vue-hot-reload-api\")      .rerender(\"data-v-5f632604\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5f632604\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/user/book/updateBook.vue\n// module id = null\n// module chunks = ","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5f632604\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./updateBook.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./updateBook.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./updateBook.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5f632604\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./updateBook.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5f632604\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src/components/user/book/updateBook.vue\"\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-5f632604\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-5f632604\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/user/book/updateBook.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5f632604\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./updateBook.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"63d18c08\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5f632604\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./updateBook.vue\", function() {\n     var newContent = require(\"!!../../../../node_modules/css-loader/index.js?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5f632604\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./updateBook.vue\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5f632604\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/user/book/updateBook.vue\n// module id = Je7I\n// module chunks = 11","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \"\\n.hideUpload[data-v-5f632604] .el-upload{\\n  display: none;\\n}\\n.form-btn[data-v-5f632604]{\\n margin-left:200px\\n}\\n.form-btn[data-v-5f632604] .el-button--primary{\\n  background-color: #E0B41B;\\n  border: 1px solid #E0B41B;\\n  margin-left: 80px;\\n  width: 120px;\\n}\\n[data-v-5f632604] .el-form-item .el-input{\\n  width: 280px;\\n  margin: 0 auto;\\n}\\n.book-form[data-v-5f632604]{\\n  width: 1000px;\\n  margin: 0 auto;\\n  margin-top: 30px;\\n}\\n.search[data-v-5f632604]{\\n  width: 1224px;\\n  margin: 0 auto;\\n}\\n.history[data-v-5f632604]{\\n  position: relative;\\n  margin-left: 210px;\\n  padding-top: 0px;\\n}\\n.his-li[data-v-5f632604]{\\n  float: left;\\n  color: #333333;\\n  font-size: 12pt;\\n  margin-left: 8px;\\n  opacity: 0.8;\\n}\\n.banner[data-v-5f632604]{\\n  width: 100%;\\n  background-color: #E9EBE7;\\n  border: 1px solid #E9EBE7;\\n}\\n.search-input[data-v-5f632604]{\\n  margin-left:450px;\\n  margin-top: 2px;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"C:/StudyProject/GitPro/vue-springboot-bookstores/ui-bookstore/src/components/user/book/src/components/user/book/updateBook.vue\"],\"names\":[],\"mappings\":\";AA0TA;EACA,cAAA;CACA;AAEA;CACA,iBAAA;CACA;AACA;EACA,0BAAA;EACA,0BAAA;EACA,kBAAA;EACA,aAAA;CACA;AACA;EACA,aAAA;EACA,eAAA;CACA;AACA;EACA,cAAA;EACA,eAAA;EACA,iBAAA;CAEA;AAEA;EACA,cAAA;EACA,eAAA;CACA;AACA;EACA,mBAAA;EACA,mBAAA;EACA,iBAAA;CACA;AACA;EACA,YAAA;EACA,eAAA;EACA,gBAAA;EACA,iBAAA;EACA,aAAA;CACA;AACA;EACA,YAAA;EACA,0BAAA;EACA,0BAAA;CACA;AACA;EACA,kBAAA;EACA,gBAAA;CACA\",\"file\":\"updateBook.vue\",\"sourcesContent\":[\"<template>\\n  <div>\\n    <el-container direction=\\\"vertical\\\">\\n      <el-main><pageheader></pageheader></el-main>\\n      <div class=\\\"banner\\\">\\n        <el-container direction=\\\"horizontal\\\" class=\\\"search\\\">\\n          <el-main>\\n            <el-image :src=\\\"require('@/assets/img/logo.png')\\\" style=\\\"width: 230px;height: 88px\\\"></el-image>\\n          </el-main>\\n          <el-container direction=\\\"vertical\\\">\\n            <el-main class=\\\"search-input\\\">\\n              <el-input placeholder=\\\"请输入内容\\\" style=\\\"width:320px\\\"></el-input> <el-button><span>搜索</span></el-button></el-main>\\n            <el-main class=\\\"history\\\">\\n              <ul class=\\\"history\\\">\\n                <li class=\\\"his-li\\\">莫言</li>\\n                <li class=\\\"his-li\\\">余光中</li>\\n                <li class=\\\"his-li\\\">毛姆</li>\\n                <li class=\\\"his-li\\\">追风筝的人</li>\\n                <li class=\\\"his-li\\\">莫言</li>\\n                <li class=\\\"his-li\\\">余光中</li>\\n              </ul>\\n\\n            </el-main>\\n          </el-container>\\n        </el-container>\\n      </div>\\n      <div>\\n    <el-form  :inline=\\\"true\\\" :label-position=\\\"postion\\\" :model=\\\"bookForm\\\" status-icon  ref=\\\"bookForm\\\" label-width=\\\"100px\\\" class=\\\"book-form\\\">\\n          <el-form-item  label=\\\"ISBN\\\" class=\\\"\\\">\\n            <el-input v-model=\\\"bookForm.iSBN\\\"></el-input>\\n          </el-form-item>\\n          <el-form-item label=\\\"书名\\\">\\n            <el-input v-model=\\\"bookForm.bookName\\\"></el-input>\\n          </el-form-item>\\n          <el-form-item label=\\\"作者\\\">\\n            <el-input v-model=\\\"bookForm.author\\\"></el-input>\\n          </el-form-item>\\n          <el-form-item label=\\\"出版社\\\">\\n            <el-input v-model=\\\"bookForm.publisher\\\"></el-input>\\n          </el-form-item>\\n          <el-form-item label=\\\"出版日期\\\">\\n            <el-date-picker\\n              v-model=\\\"bookForm.publishTime\\\"\\n              type=\\\"month\\\"\\n              format=\\\"yyyy-MM\\\"\\n              value-format=\\\"yyyy-MM-dd\\\"\\n              placeholder=\\\"选择年月\\\">\\n            </el-date-picker>\\n          </el-form-item>\\n          <el-form-item label=\\\"数量\\\">\\n<!--            <el-input v-model.number=\\\"bookForm.storage\\\"></el-input>-->\\n            <el-input-number v-model=\\\"bookForm.storage\\\" size=\\\"large\\\" controls-position=\\\"right\\\"  :min=\\\"1\\\" :max=\\\"999\\\" style=\\\"width: auto\\\">\\n            </el-input-number>\\n          </el-form-item>\\n          <el-form-item label=\\\"单价\\\">\\n            <el-input v-model=\\\"bookForm.price\\\"></el-input>\\n          </el-form-item>\\n          <el-form-item label=\\\"折扣\\\">\\n            <el-input v-model=\\\"bookForm.discount\\\" placeholder=\\\"请输入百分比折扣\\\" @change=\\\"formatDiscount\\\">\\n              <template slot=\\\"append\\\">%</template>\\n            </el-input>\\n          </el-form-item>\\n          <el-form-item label=\\\"现价\\\">\\n            <el-input v-model=\\\"newprice\\\" readonly></el-input>\\n          </el-form-item>\\n      <el-form-item label=\\\"原描述图片\\\" style=\\\"position: relative\\\">\\n        <div v-for=\\\"img in bookForm.imgurl\\\" :key=\\\"img.index\\\" style=\\\"float: left;margin-left: 20px\\\">\\n<!--          <img-->\\n<!--            class=\\\"el-upload-list__item-thumbnail\\\"-->\\n<!--            :src=\\\"'http://localhost:8088/upload/'+img\\\" alt=\\\"\\\"-->\\n<!--            >-->\\n            <el-image\\n              :src=\\\"'http://localhost:8088/upload/'+img\\\" style=\\\"width: 90px;height: 90px\\\"\\n            ></el-image>\\n        </div>\\n      </el-form-item>\\n\\n      <el-form-item label=\\\"书本描述\\\">\\n        <el-input\\n          type=\\\"textarea\\\"\\n          :rows=\\\"4\\\"\\n          placeholder=\\\"几成新呢，描述下你的书吧\\\"\\n          v-model=\\\"bookForm.tips\\\"\\n          style=\\\"width: 280px;\\\"></el-input>\\n      </el-form-item>\\n\\n      <el-form-item label=\\\"修改描述图片\\\">\\n        <el-upload\\n          action=\\\"\\\"\\n          multiple\\n          list-type=\\\"picture-card\\\"\\n          :file-list=\\\"filelist\\\"\\n          :auto-upload=\\\"false\\\"\\n          :class=\\\"{hideUpload:hideUploadAdd}\\\"\\n          :on-change=\\\"handleAddChange\\\"\\n          :on-exceed=\\\"handleExceed\\\"\\n          :on-remove=\\\"handleRemove\\\"\\n          :limit=\\\"limitCount\\\"\\n        >\\n          <i slot=\\\"default\\\" class=\\\"el-icon-plus\\\"></i>\\n          <div class=\\\"el-upload__tip\\\" slot=\\\"tip\\\">（最多上传5张图片）</div>\\n          <div slot=\\\"file\\\" slot-scope=\\\"{file}\\\">\\n            <img\\n              class=\\\"el-upload-list__item-thumbnail\\\"\\n              :src=\\\"file.url\\\" alt=\\\"\\\"\\n            >\\n            <span class=\\\"el-upload-list__item-actions\\\">\\n        <span\\n          class=\\\"el-upload-list__item-preview\\\"\\n          @click=\\\"handlePictureCardPreview(file)\\\"\\n        >\\n          <i class=\\\"el-icon-zoom-in\\\"></i>\\n        </span>\\n        <span\\n          v-if=\\\"!disabled\\\"\\n          class=\\\"el-upload-list__item-delete\\\"\\n          @click=\\\"handleRemove(file)\\\"\\n        >\\n          <i class=\\\"el-icon-delete\\\"></i>\\n        </span>\\n      </span>\\n          </div>\\n        </el-upload>\\n        <!--    放大图-->\\n        <el-dialog :visible.sync=\\\"dialogVisible\\\">\\n          <img width=\\\"100%\\\" :src=\\\"dialogImageUrl\\\" alt=\\\"\\\">\\n        </el-dialog>\\n      </el-form-item>\\n      <el-form-item class=\\\"form-btn\\\">\\n        <el-button type=\\\"primary\\\" @click=\\\"resetForm('bookForm')\\\">取 消</el-button>\\n        <el-button type=\\\"primary\\\" @click=\\\"submitForm('bookForm')\\\">修 改</el-button>\\n      </el-form-item>\\n    </el-form>\\n      </div>\\n    <pagefooter></pagefooter>\\n    </el-container>\\n  </div>\\n\\n</template>\\n\\n<script>\\n  import {findbookbyid,updatebook} from \\\"../../../axios/api\\\";\\n  import pageheader from \\\"../../pageheader\\\";\\n  import pagefooter from \\\"../../pagefooter\\\";\\n\\n    export default {\\n        name: \\\"updatebook\\\",\\n        data(){\\n          return{\\n            bookForm:{\\n              code:'',\\n              userId:'',\\n              iSBN:'',\\n              bookName:'',\\n              author:'',\\n              imgurl:'',\\n              publisher:'',\\n              publishTime:'',\\n              price:'',\\n              discount:'',\\n              upDate:'',\\n              storage:'',\\n              tips:'',\\n              imgList:[],\\n            },\\n            dialogImageUrl: '',\\n            dialogVisible: false,\\n            disabled: false,\\n            hideUploadAdd:false,\\n            filelist:[],\\n            limitCount:4,\\n            postion:'left'\\n          }\\n      },\\n      components: {\\n        pageheader,\\n        pagefooter\\n      },\\n      computed:{\\n        newprice:function () {\\n          let val=this.bookForm.price*this.bookForm.discount*0.01\\n          let price=Number(val).toFixed(3)\\n          let realVal = price.substring(0, price.length - 1)\\n          return  Number(realVal);\\n        }\\n      },\\n        mounted() {\\n           let bookId=this.$route.params.bookId;\\n           findbookbyid(bookId).then(res=>{\\n             if(res.data!=null){\\n               console.log(res.data);\\n               this.bookForm=res.data;\\n               console.log(res.data.imgurl)\\n               let imglist=res.data.imgurl.split(\\\",\\\")\\n                this.bookForm.imgurl=imglist\\n               //datepicker 只接受date()格式\\n               this.bookForm.publishTime=new Date(this.bookForm.publishTime);\\n             }\\n           })\\n\\n        },\\n      methods:{\\n        formatDiscount(val){\\n          const r = /^\\\\+?[1-9][0-9]*$/;//正整数\\n          if(!r.test(val)){\\n            this.$message({\\n              type:\\\"warning\\\",\\n              message:\\\"折扣输入格式有误\\\",\\n              showClose:true\\n            })\\n          }\\n        },\\n        newTransformBase64(list, callback, errorCallback) {\\n          let promise = [];\\n          list.forEach((item, index) => {\\n            let p = new Promise((resolve, reject) => {\\n              let reader = new FileReader();\\n              let obj;\\n              if (item.raw) {\\n                reader.readAsDataURL(item.raw);\\n                reader.onload = function (e) {\\n                  obj = reader.result;\\n                  resolve(obj);\\n                }\\n              }\\n            })\\n            promise.push(p);\\n          })\\n\\n          Promise.all(promise).then(results => {\\n            callback(results);\\n          }).catch(error => {\\n            errorCallback && errorCallback();\\n            this.$message.error(\\\"错误\\\");\\n          });\\n        },\\n        // 上传change事件\\n        handleAddChange(file){\\n\\n          // 图片大小限制\\n          const isLt20M = file.size / 1024 / 1024 < 20;\\n          if (!isLt20M) {\\n            this.$message.error(\\\"上传图片大小不能超过 20MB!\\\");\\n            this.filelist.splice(-1, 1);\\n          } else {\\n            this.filelist.push(file);\\n          }\\n          this.hideUploadAdd=this.filelist.length>=this.limitCount;\\n        },\\n\\n        // 多选大于限制个数时做提示\\n        handleExceed(file) {\\n          // 上传文件>=限制个数时隐藏上传组件\\n          this.hideUploadAdd=true;\\n          this.$message({\\n            message: \\\"上传文件超出限制个数！\\\",\\n            type: \\\"warning\\\"\\n          })\\n\\n\\n        },\\n        handleRemove(file) {\\n          //从filelist当前图片uid\\n          var list=this.filelist;\\n          list.forEach((item,index)=>{\\n            if(item.uid==file.uid){\\n              console.log(\\\"uid配对\\\")\\n              this.filelist.splice(index,1)\\n            }\\n          })\\n          this.hideUploadAdd=this.filelist.length>=this.limitCount;\\n        },\\n        handlePictureCardPreview(file) {\\n          this.dialogImageUrl = file.url;\\n          this.dialogVisible = true;\\n        },\\n      submitForm(formname){\\n          console.log(this.filelist)\\n        this.newTransformBase64(this.filelist, (results) => {\\n          this.bookForm.imgList=results;\\n          var bookparam=this.bookForm;\\n          this.bookForm.imgurl=null;\\n          this.bookForm.publishTime=new Date(this.bookForm.publishTime);\\n          this.bookForm.userId=this.$store.state.user.userId;//添加该书本的用户\\n          console.log(this.$store.state.user.userId);\\n          this.bookForm.code='10001';//图书类型id\\n          var bookparam=this.bookForm;\\n          updatebook(bookparam).then(res=>{\\n            if(res.data!=0){\\n              console.log(res.data)\\n              this.$message({\\n                showClose:true,\\n                message:\\\"修改成功\\\",\\n                type:'success'\\n              })\\n              //跳转到详情页\\n              this.$router.push({\\n                name:'bookdetail',\\n                params:{\\n                  bookId:res.data\\n                }\\n              })\\n            }\\n          })\\n        })\\n      },\\n        resetForm(formName) {\\n          this.$refs[formName].resetFields();\\n        }\\n      }\\n    }\\n</script>\\n\\n<style scoped>\\n  .hideUpload /deep/ .el-upload{\\n    display: none;\\n  }\\n\\n  .form-btn{\\n   margin-left:200px\\n  }\\n  .form-btn>>>.el-button--primary{\\n    background-color: #E0B41B;\\n    border: 1px solid #E0B41B;\\n    margin-left: 80px;\\n    width: 120px;\\n  }\\n  /deep/ .el-form-item .el-input{\\n    width: 280px;\\n    margin: 0 auto;\\n  }\\n  .book-form{\\n    width: 1000px;\\n    margin: 0 auto;\\n    margin-top: 30px;\\n\\n  }\\n\\n  .search{\\n    width: 1224px;\\n    margin: 0 auto;\\n  }\\n  .history{\\n    position: relative;\\n    margin-left: 210px;\\n    padding-top: 0px;\\n  }\\n  .his-li{\\n    float: left;\\n    color: #333333;\\n    font-size: 12pt;\\n    margin-left: 8px;\\n    opacity: 0.8;\\n  }\\n  .banner{\\n    width: 100%;\\n    background-color: #E9EBE7;\\n    border: 1px solid #E9EBE7;\\n  }\\n  .search-input{\\n    margin-left:450px;\\n    margin-top: 2px;\\n  }\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?{\"sourceMap\":true}!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5f632604\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/user/book/updateBook.vue\n// module id = b6Z9\n// module chunks = 11"],"sourceRoot":""}