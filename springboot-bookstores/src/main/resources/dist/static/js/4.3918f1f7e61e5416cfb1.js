webpackJsonp([4],{"//Fk":function(e,t,o){e.exports={default:o("U5ju"),__esModule:!0}},"2KxR":function(e,t){e.exports=function(e,t,o,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(o+": incorrect invocation!");return e}},"3fs2":function(e,t,o){var n=o("RY/4"),r=o("dSzd")("iterator"),i=o("/bQp");e.exports=o("FeBl").getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||i[n(e)]}},7651:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("//Fk"),r=o.n(n),i=o("c2Ch"),s={name:"addBook",data:function(){return{bookForm:{code:"",userId:"",iSBN:"",bookName:"",author:"",imgurl:"",publisher:"",publishTime:"",price:"",discount:"",upDate:"",storage:"",tips:"",imgList:[]},dialogImageUrl:"",dialogVisible:!1,disabled:!1,hideUploadAdd:!1,filelist:[]}},computed:{newprice:function(){return this.bookForm.price*this.bookForm.discount}},methods:{newTransformBase64:function(e,t,o){var n=this,i=[];e.forEach(function(e,t){var o=new r.a(function(t,o){var n=new FileReader,r=void 0;e.raw&&(n.readAsDataURL(e.raw),n.onload=function(e){r=n.result,t(r)})});i.push(o)}),r.a.all(i).then(function(e){t(e)}).catch(function(e){o&&o(),n.$message.error("错误")})},handleAddChange:function(e,t){e.size/1024/1024<20?this.filelist.push(e):(this.$message.error("上传图片大小不能超过 20MB!"),t.splice(-1,1))},handleExceed:function(e,t){t.length>=5&&(this.hideUploadAdd=!0,this.$message({message:"上传文件超出限制个数！",type:"warning"}))},handleRemove:function(e,t){this.$refs[upload].clearFiles(e)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},submitForm:function(e){var t=this;this.newTransformBase64(this.filelist,function(e){t.bookForm.imgList=e;var o=t.bookForm;t.bookForm.userId=t.$store.state.user.userId,console.log(t.$store.state.user.userId),t.bookForm.code="10001";o=t.bookForm;Object(i.a)(o).then(function(e){0!=e.data&&(console.log(e.data),t.$message({showClose:!0,message:"发布成功",type:"success"}),t.$router.push({name:"bookdetail",params:{bookId:e.data}}))})})},resetForm:function(e){this.$refs[e].resetFields()}}},a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"bookForm",staticClass:"book-form",attrs:{model:e.bookForm,"status-icon":"","label-width":"100px"}},[o("el-form-item",{attrs:{label:"ISBN"}},[o("el-input",{model:{value:e.bookForm.iSBN,callback:function(t){e.$set(e.bookForm,"iSBN",t)},expression:"bookForm.iSBN"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"书名"}},[o("el-input",{model:{value:e.bookForm.bookName,callback:function(t){e.$set(e.bookForm,"bookName",t)},expression:"bookForm.bookName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"作者"}},[o("el-input",{model:{value:e.bookForm.author,callback:function(t){e.$set(e.bookForm,"author",t)},expression:"bookForm.author"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"出版社"}},[o("el-input",{model:{value:e.bookForm.publisher,callback:function(t){e.$set(e.bookForm,"publisher",t)},expression:"bookForm.publisher"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"出版日期"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.bookForm.publishTime,callback:function(t){e.$set(e.bookForm,"publishTime",t)},expression:"bookForm.publishTime"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"数量"}},[o("el-input",{model:{value:e.bookForm.storage,callback:function(t){e.$set(e.bookForm,"storage",e._n(t))},expression:"bookForm.storage"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"单价"}},[o("el-input",{model:{value:e.bookForm.price,callback:function(t){e.$set(e.bookForm,"price",t)},expression:"bookForm.price"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"折扣"}},[o("el-input",{model:{value:e.bookForm.discount,callback:function(t){e.$set(e.bookForm,"discount",t)},expression:"bookForm.discount"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"现价"}},[o("el-input",{attrs:{readonly:""},model:{value:e.newprice,callback:function(t){e.newprice=t},expression:"newprice"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"书本描述"}},[o("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",rows:4,placeholder:"几成新呢，描述下你的书吧"},model:{value:e.bookForm.tips,callback:function(t){e.$set(e.bookForm,"tips",t)},expression:"bookForm.tips"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"添加书本图片"}},[o("el-upload",{ref:"upload",class:{hide:e.hideUploadAdd},attrs:{action:"",multiple:"",data:e.bookForm,"list-type":"picture-card","file-list":e.filelist,"auto-upload":!1,"on-change":e.handleAddChange,"on-exceed":e.handleExceed,"on-remove":e.handleRemove},scopedSlots:e._u([{key:"file",fn:function(t){var n=t.file;return o("div",{},[o("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:n.url,alt:""}}),e._v(" "),o("span",{staticClass:"el-upload-list__item-actions"},[o("span",{staticClass:"el-upload-list__item-preview",on:{click:function(t){return e.handlePictureCardPreview(n)}}},[o("i",{staticClass:"el-icon-zoom-in"})]),e._v(" "),e.disabled?e._e():o("span",{staticClass:"el-upload-list__item-delete",on:{click:function(t){return e.handleRemove(n)}}},[o("i",{staticClass:"el-icon-delete"})])])])}}])},[o("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"}),e._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("（最多上传5张图片）")])]),e._v(" "),o("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),o("el-form-item",{staticClass:"form-btn"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.resetForm("bookForm")}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("bookForm")}}},[e._v("发 布")])],1)],1)],1)};a._withStripped=!0;var l={render:a,staticRenderFns:[]},c=l;var u=!1;var m=o("VU/8")(s,c,!1,function(e){u||o("yP1Y")},"data-v-2807dc30",null);m.options.__file="src/components/user/book/addBook.vue";t.default=m.exports},"82Mu":function(e,t,o){var n=o("7KvD"),r=o("L42u").set,i=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,l="process"==o("R9M2")(s);e.exports=function(){var e,t,o,c=function(){var n,r;for(l&&(n=s.domain)&&n.exit();e;){r=e.fn,e=e.next;try{r()}catch(n){throw e?o():t=void 0,n}}t=void 0,n&&n.enter()};if(l)o=function(){s.nextTick(c)};else if(!i||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var u=a.resolve(void 0);o=function(){u.then(c)}}else o=function(){r.call(n,c)};else{var m=!0,d=document.createTextNode("");new i(c).observe(d,{characterData:!0}),o=function(){d.data=m=!m}}return function(n){var r={fn:n,next:void 0};t&&(t.next=r),e||(e=r,o()),t=r}}},CXw9:function(e,t,o){"use strict";var n,r,i,s,a=o("O4g8"),l=o("7KvD"),c=o("+ZMJ"),u=o("RY/4"),m=o("kM2E"),d=o("EqjI"),f=o("lOnJ"),p=o("2KxR"),h=o("NWt+"),v=o("t8x9"),b=o("L42u").set,k=o("82Mu")(),g=o("qARP"),_=o("dNDb"),F=o("iUbK"),y=o("fJUb"),x=l.TypeError,w=l.process,A=w&&w.versions,P=A&&A.v8||"",C=l.Promise,M="process"==u(w),R=function(){},j=r=g.f,B=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[o("dSzd")("species")]=function(e){e(R,R)};return(M||"function"==typeof PromiseRejectionEvent)&&e.then(R)instanceof t&&0!==P.indexOf("6.6")&&-1===F.indexOf("Chrome/66")}catch(e){}}(),$=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},E=function(e,t){if(!e._n){e._n=!0;var o=e._c;k(function(){for(var n=e._v,r=1==e._s,i=0,s=function(t){var o,i,s,a=r?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{a?(r||(2==e._h&&S(e),e._h=1),!0===a?o=n:(u&&u.enter(),o=a(n),u&&(u.exit(),s=!0)),o===t.promise?c(x("Promise-chain cycle")):(i=$(o))?i.call(o,l,c):l(o)):c(n)}catch(e){u&&!s&&u.exit(),c(e)}};o.length>i;)s(o[i++]);e._c=[],e._n=!1,t&&!e._h&&D(e)})}},D=function(e){b.call(l,function(){var t,o,n,r=e._v,i=N(e);if(i&&(t=_(function(){M?w.emit("unhandledRejection",r,e):(o=l.onunhandledrejection)?o({promise:e,reason:r}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",r)}),e._h=M||N(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},N=function(e){return 1!==e._h&&0===(e._a||e._c).length},S=function(e){b.call(l,function(){var t;M?w.emit("rejectionHandled",e):(t=l.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},I=function(e){var t,o=this;if(!o._d){o._d=!0,o=o._w||o;try{if(o===e)throw x("Promise can't be resolved itself");(t=$(e))?k(function(){var n={_w:o,_d:!1};try{t.call(e,c(I,n,1),c(U,n,1))}catch(e){U.call(n,e)}}):(o._v=e,o._s=1,E(o,!1))}catch(e){U.call({_w:o,_d:!1},e)}}};B||(C=function(e){p(this,C,"Promise","_h"),f(e),n.call(this);try{e(c(I,this,1),c(U,this,1))}catch(e){U.call(this,e)}},(n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=o("xH/j")(C.prototype,{then:function(e,t){var o=j(v(this,C));return o.ok="function"!=typeof e||e,o.fail="function"==typeof t&&t,o.domain=M?w.domain:void 0,this._c.push(o),this._a&&this._a.push(o),this._s&&E(this,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=c(I,e,1),this.reject=c(U,e,1)},g.f=j=function(e){return e===C||e===s?new i(e):r(e)}),m(m.G+m.W+m.F*!B,{Promise:C}),o("e6n0")(C,"Promise"),o("bRrM")("Promise"),s=o("FeBl").Promise,m(m.S+m.F*!B,"Promise",{reject:function(e){var t=j(this);return(0,t.reject)(e),t.promise}}),m(m.S+m.F*(a||!B),"Promise",{resolve:function(e){return y(a&&this===s?C:this,e)}}),m(m.S+m.F*!(B&&o("dY0y")(function(e){C.all(e).catch(R)})),"Promise",{all:function(e){var t=this,o=j(t),n=o.resolve,r=o.reject,i=_(function(){var o=[],i=0,s=1;h(e,!1,function(e){var a=i++,l=!1;o.push(void 0),s++,t.resolve(e).then(function(e){l||(l=!0,o[a]=e,--s||n(o))},r)}),--s||n(o)});return i.e&&r(i.v),o.promise},race:function(e){var t=this,o=j(t),n=o.reject,r=_(function(){h(e,!1,function(e){t.resolve(e).then(o.resolve,n)})});return r.e&&n(r.v),o.promise}})},EqBC:function(e,t,o){"use strict";var n=o("kM2E"),r=o("FeBl"),i=o("7KvD"),s=o("t8x9"),a=o("fJUb");n(n.P+n.R,"Promise",{finally:function(e){var t=s(this,r.Promise||i.Promise),o="function"==typeof e;return this.then(o?function(o){return a(t,e()).then(function(){return o})}:e,o?function(o){return a(t,e()).then(function(){throw o})}:e)}})},L42u:function(e,t,o){var n,r,i,s=o("+ZMJ"),a=o("knuC"),l=o("RPLV"),c=o("ON07"),u=o("7KvD"),m=u.process,d=u.setImmediate,f=u.clearImmediate,p=u.MessageChannel,h=u.Dispatch,v=0,b={},k=function(){var e=+this;if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},g=function(e){k.call(e.data)};d&&f||(d=function(e){for(var t=[],o=1;arguments.length>o;)t.push(arguments[o++]);return b[++v]=function(){a("function"==typeof e?e:Function(e),t)},n(v),v},f=function(e){delete b[e]},"process"==o("R9M2")(m)?n=function(e){m.nextTick(s(k,e,1))}:h&&h.now?n=function(e){h.now(s(k,e,1))}:p?(i=(r=new p).port2,r.port1.onmessage=g,n=s(i.postMessage,i,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(e){u.postMessage(e+"","*")},u.addEventListener("message",g,!1)):n="onreadystatechange"in c("script")?function(e){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),k.call(e)}}:function(e){setTimeout(s(k,e,1),0)}),e.exports={set:d,clear:f}},Mhyx:function(e,t,o){var n=o("/bQp"),r=o("dSzd")("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||i[r]===e)}},"NWt+":function(e,t,o){var n=o("+ZMJ"),r=o("msXi"),i=o("Mhyx"),s=o("77Pl"),a=o("QRG4"),l=o("3fs2"),c={},u={};(t=e.exports=function(e,t,o,m,d){var f,p,h,v,b=d?function(){return e}:l(e),k=n(o,m,t?2:1),g=0;if("function"!=typeof b)throw TypeError(e+" is not iterable!");if(i(b)){for(f=a(e.length);f>g;g++)if((v=t?k(s(p=e[g])[0],p[1]):k(e[g]))===c||v===u)return v}else for(h=b.call(e);!(p=h.next()).done;)if((v=r(h,k,p.value,t))===c||v===u)return v}).BREAK=c,t.RETURN=u},"RY/4":function(e,t,o){var n=o("R9M2"),r=o("dSzd")("toStringTag"),i="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,o,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?o:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},U5ju:function(e,t,o){o("M6a0"),o("zQR9"),o("+tPU"),o("CXw9"),o("EqBC"),o("jKW+"),e.exports=o("FeBl").Promise},bRrM:function(e,t,o){"use strict";var n=o("7KvD"),r=o("FeBl"),i=o("evD5"),s=o("+E39"),a=o("dSzd")("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:n[e];s&&t&&!t[a]&&i.f(t,a,{configurable:!0,get:function(){return this}})}},dNDb:function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},dY0y:function(e,t,o){var n=o("dSzd")("iterator"),r=!1;try{var i=[7][n]();i.return=function(){r=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var o=!1;try{var i=[7],s=i[n]();s.next=function(){return{done:o=!0}},i[n]=function(){return s},e(i)}catch(e){}return o}},fJUb:function(e,t,o){var n=o("77Pl"),r=o("EqjI"),i=o("qARP");e.exports=function(e,t){if(n(e),r(t)&&t.constructor===e)return t;var o=i.f(e);return(0,o.resolve)(t),o.promise}},iUbK:function(e,t,o){var n=o("7KvD").navigator;e.exports=n&&n.userAgent||""},"jKW+":function(e,t,o){"use strict";var n=o("kM2E"),r=o("qARP"),i=o("dNDb");n(n.S,"Promise",{try:function(e){var t=r.f(this),o=i(e);return(o.e?t.reject:t.resolve)(o.v),t.promise}})},knuC:function(e,t){e.exports=function(e,t,o){var n=void 0===o;switch(t.length){case 0:return n?e():e.call(o);case 1:return n?e(t[0]):e.call(o,t[0]);case 2:return n?e(t[0],t[1]):e.call(o,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(o,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(o,t[0],t[1],t[2],t[3])}return e.apply(o,t)}},msXi:function(e,t,o){var n=o("77Pl");e.exports=function(e,t,o,r){try{return r?t(n(o)[0],o[1]):t(o)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},qARP:function(e,t,o){"use strict";var n=o("lOnJ");e.exports.f=function(e){return new function(e){var t,o;this.promise=new e(function(e,n){if(void 0!==t||void 0!==o)throw TypeError("Bad Promise constructor");t=e,o=n}),this.resolve=n(t),this.reject=n(o)}(e)}},t8x9:function(e,t,o){var n=o("77Pl"),r=o("lOnJ"),i=o("dSzd")("species");e.exports=function(e,t){var o,s=n(e).constructor;return void 0===s||void 0==(o=n(s)[i])?t:r(o)}},xB73:function(e,t,o){(e.exports=o("FZ+f")(!0)).push([e.i,"\n.book-form[data-v-2807dc30] .el-form-item .el-input{\n  width: 300px;\n  margin: 0 auto;\n}\n.book-form[data-v-2807dc30]{\n\n  width: 1000px;\n  margin: 0 auto;\n}\n","",{version:3,sources:["C:/StudyProject/GitPro/vue-springboot-bookstores/ui-bookstore/src/components/user/book/src/components/user/book/addBook.vue"],names:[],mappings:";AAoOA;EACA,aAAA;EACA,eAAA;CACA;AACA;;EAEA,cAAA;EACA,eAAA;CACA",file:"addBook.vue",sourcesContent:['<template>\n    <div>\n      <el-form :model="bookForm" status-icon  ref="bookForm" label-width="100px" class="book-form">\n        <el-form-item  label="ISBN" class="">\n          <el-input v-model="bookForm.iSBN"></el-input>\n        </el-form-item>\n        <el-form-item label="书名">\n          <el-input v-model="bookForm.bookName"></el-input>\n        </el-form-item>\n        <el-form-item label="作者">\n          <el-input v-model="bookForm.author"></el-input>\n        </el-form-item>\n        <el-form-item label="出版社">\n          <el-input v-model="bookForm.publisher"></el-input>\n        </el-form-item>\n        <el-form-item label="出版日期">\n          <el-date-picker\n            v-model="bookForm.publishTime"\n            type="date"\n            placeholder="选择日期"\n            format="yyyy 年 MM 月 dd 日"\n            value-format="yyyy-MM-dd">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item label="数量">\n          <el-input v-model.number="bookForm.storage"></el-input>\n        </el-form-item>\n        <el-form-item label="单价">\n          <el-input v-model="bookForm.price"></el-input>\n        </el-form-item>\n        <el-form-item label="折扣">\n          <el-input v-model="bookForm.discount"></el-input>\n        </el-form-item>\n        <el-form-item label="现价">\n          <el-input v-model="newprice" readonly></el-input>\n        </el-form-item>\n        <el-form-item label="书本描述">\n          <el-input\n            type="textarea"\n            :rows="4"\n            placeholder="几成新呢，描述下你的书吧"\n            v-model="bookForm.tips"\n            style="width: 400px"></el-input>\n        </el-form-item>\n        <el-form-item label="添加书本图片">\n          <el-upload\n            action=""\n            multiple\n            :data="bookForm"\n            list-type="picture-card"\n            :file-list="filelist"\n            :auto-upload="false"\n            :class="{hide:hideUploadAdd}"\n            :on-change="handleAddChange"\n            :on-exceed="handleExceed"\n            :on-remove="handleRemove"\n            ref="upload"\n          >\n            <i slot="default" class="el-icon-plus"></i>\n            <div class="el-upload__tip" slot="tip">（最多上传5张图片）</div>\n            <div slot="file" slot-scope="{file}">\n              <img\n                class="el-upload-list__item-thumbnail"\n                :src="file.url" alt=""\n              >\n              <span class="el-upload-list__item-actions">\n        <span\n          class="el-upload-list__item-preview"\n          @click="handlePictureCardPreview(file)"\n        >\n          <i class="el-icon-zoom-in"></i>\n        </span>\n        <span\n          v-if="!disabled"\n          class="el-upload-list__item-delete"\n          @click="handleRemove(file)"\n        >\n          <i class="el-icon-delete"></i>\n        </span>\n      </span>\n            </div>\n          </el-upload>\n          \x3c!--    放大图--\x3e\n          <el-dialog :visible.sync="dialogVisible">\n            <img width="100%" :src="dialogImageUrl" alt="">\n          </el-dialog>\n        </el-form-item>\n\n        <el-form-item class="form-btn">\n          <el-button type="primary" @click="resetForm(\'bookForm\')">取 消</el-button>\n          <el-button type="primary" @click="submitForm(\'bookForm\')">发 布</el-button>\n        </el-form-item>\n      </el-form>\n\n    </div>\n</template>\n\n<script>\n    import {addbook} from "../../../axios/api";\n\n    export default {\n        name: "addBook",\n      data:function () {\n        return{\n          bookForm:{\n            code:\'\',\n            userId:\'\',\n            iSBN:\'\',\n            bookName:\'\',\n            author:\'\',\n            imgurl:\'\',\n            publisher:\'\',\n            publishTime:\'\',\n            price:\'\',\n            discount:\'\',\n            upDate:\'\',\n            storage:\'\',\n            tips:\'\',\n            imgList:[],\n          },\n          dialogImageUrl: \'\',\n          dialogVisible: false,\n          disabled: false,\n          hideUploadAdd:false,\n          filelist:[]\n        }\n      },\n      computed:{\n        newprice:function () {\n          return this.bookForm.price*this.bookForm.discount;\n        }\n      },\n      methods: {\n        newTransformBase64(list, callback, errorCallback) {\n          let promise = [];\n          list.forEach((item, index) => {\n            let p = new Promise((resolve, reject) => {\n              let reader = new FileReader();\n              let obj;\n              if (item.raw) {\n                reader.readAsDataURL(item.raw);\n                reader.onload = function (e) {\n                  obj = reader.result;\n                  resolve(obj);\n                }\n              }\n            })\n            promise.push(p);\n          })\n\n          Promise.all(promise).then(results => {\n            callback(results);\n          }).catch(error => {\n            errorCallback && errorCallback();\n            this.$message.error("错误");\n          });\n        },\n        // 上传change事件\n        handleAddChange(file, fileList){\n          // 图片大小限制\n          const isLt20M = file.size / 1024 / 1024 < 20;\n          if (!isLt20M) {\n            this.$message.error("上传图片大小不能超过 20MB!");\n            fileList.splice(-1, 1);\n          } else {\n            this.filelist.push(file);\n          }\n        },\n\n        // 多选大于限制个数时做提示\n        handleExceed(file, fileList) {\n          // 上传文件>=限制个数时隐藏上传组件\n          if (fileList.length >= 5) {\n            this.hideUploadAdd = true;\n            this.$message({\n              message: "上传文件超出限制个数！",\n              type: "warning"\n            });\n          }\n        },\n        handleRemove(file,fileList) {\n          this.$refs[upload].clearFiles(file)\n        },\n        handlePictureCardPreview(file) {\n          this.dialogImageUrl = file.url;\n          this.dialogVisible = true;\n        },\n        submitForm(formname){\n          this.newTransformBase64(this.filelist, (results) => {\n            this.bookForm.imgList=results;\n            // console.log(JSON.stringify(this.bookForm))\n            var bookparam=this.bookForm;\n            this.bookForm.userId=this.$store.state.user.userId;//添加该书本的用户\n            console.log(this.$store.state.user.userId);\n            //this.bookForm.upDate=new Date();//获得当前系统时间\n            // this.bookForm.upDate=this.$moment(new Date()).format(\'YYYY-MM-DD HH:mm:ss\');\n            this.bookForm.code=\'10001\';//图书类型id\n            var bookparam=this.bookForm;\n            addbook(bookparam).then(res=>{\n              if(res.data!=0){\n                console.log(res.data)\n                this.$message({\n                  showClose:true,\n                  message:"发布成功",\n                  type:\'success\'\n                })\n                //this.bookForm.upDate=this.$moment(new Date()).format(\'YYYY-MM-DD HH:mm:ss\');\n                //跳转到详情页\n                this.$router.push({\n                  name:\'bookdetail\',\n                  params:{\n                    bookId:res.data\n                  }\n                })\n              }\n            })\n          })\n\n\n        },\n        resetForm(formName) {\n          this.$refs[formName].resetFields();\n        },\n      }\n    }\n<\/script>\n\n<style scoped>\n  .book-form >>> .el-form-item .el-input{\n    width: 300px;\n    margin: 0 auto;\n  }\n  .book-form{\n\n    width: 1000px;\n    margin: 0 auto;\n  }\n</style>\n'],sourceRoot:""}])},"xH/j":function(e,t,o){var n=o("hJx8");e.exports=function(e,t,o){for(var r in t)o&&e[r]?e[r]=t[r]:n(e,r,t[r]);return e}},yP1Y:function(e,t,o){var n=o("xB73");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o("rjj0")("62eafd2a",n,!1,{})}});
//# sourceMappingURL=4.3918f1f7e61e5416cfb1.js.map