webpackJsonp([8],{Comq:function(e,t,o){var r=o("PlSc");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);o("rjj0")("3e62b3f9",r,!1,{})},PlSc:function(e,t,o){(e.exports=o("FZ+f")(!0)).push([e.i,"\n.address-form[data-v-cf1a4508]{\n  width: 1226px;\n  padding-bottom: 50px;\n}\n.address-form .el-form-item[data-v-cf1a4508] .el-input{\n    width: 300px;\n}\n","",{version:3,sources:["C:/StudyProject/GitPro/vue-springboot-bookstores/ui-bookstore/src/page/src/page/userorder.vue"],names:[],mappings:";AAuKA;EACA,cAAA;EACA,qBAAA;CACA;AACA;IACA,aAAA;CACA",file:"userorder.vue",sourcesContent:['<template>\n    <div id="userorder">\n\n      <el-container direction="vertical">\n        <pageheader></pageheader>\n        <el-main style="width: 100%;">\n          <h3>收货地址</h3>\n          <el-form :model="addrForm" status-icon ref="addrForm" class="address-form" :inline="true">\n            <el-form-item label="姓名">\n              <el-input v-model="addrForm.account"></el-input>\n            </el-form-item>\n            <el-form-item label="电话">\n              <el-input v-model.number="addrForm.userName"></el-input>\n            </el-form-item>\n            <el-form-item label="地址">\n              <el-input v-model="addrForm.email"></el-input>\n            </el-form-item>\n\n          </el-form>\n        </el-main>\n          <el-main style="width: 100%;">\n            <h3>订单详情</h3>\n            <div class="car" style="width: 1266px;margin: 0 auto">\n\n              <el-table\n                ref="multipleTable"\n                :data="orderitem"\n                tooltip-effect="dark"\n                style="width: 100%"\n               >\n                <el-table-column\n                  label="商品信息"\n                  width="120">\n                  <template slot-scope="scope">\n                    <el-image\n                      style="width: 60px; height: 60px"\n                      :src="\'http://localhost:88/upload/\'+scope.row.book.imgurl[0]"\n                    >\n                    </el-image>\n                    <span>{{scope.row.book.iSBN}}</span>\n                  </template>\n                </el-table-column>\n                <el-table-column\n                  label="书名|作者"\n                  show-overflow-tooltip>\n                  <template slot-scope="scope">\n                    <span>《{{scope.row.book.bookName}}》| <span>{{scope.row.book.author}}</span></span>\n                  </template>\n                </el-table-column>\n                <el-table-column\n                  label="出版社"\n                  show-overflow-tooltip>\n                  <template slot-scope="scope">\n                    <span>{{scope.row.book.publisher}}</span>\n                  </template>\n                </el-table-column>\n                <el-table-column\n                  label="单价"\n                  width="120">\n                  <template slot-scope="scope">{{scope.row.book.price*scope.row.book.discount}}</template>\n                </el-table-column>\n                <el-table-column\n                  label="数量"\n                  show-overflow-tooltip>\n                  <template slot-scope="scope">\n                    {{scope.row.buyNum}}\n                  </template>\n                </el-table-column>\n                <el-table-column\n                  label="小计"\n                  show-overflow-tooltip>\n                  <template slot-scope="scope">{{scope.row.book.price*scope.row.book.discount*scope.row.buyNum }}</template>\n                </el-table-column>\n              </el-table>\n\n              <div class="cart-footer" v-show="orderitem.length">\n                <div class="cart-footer-desc">\n                  共计 <span>{{countAll}}</span> 件商品\n                </div>\n                <div class="cart-footer-desc">\n                  应付总额 <span>¥ {{costAll}}</span>\n                </div>\n                <div style="margin-top: 20px">\n                  <el-button class="buy-btn" @click="submitOrder">提价订单</el-button>\n                </div>\n              </div>\n            </div>\n          </el-main>\n        <pagefooter></pagefooter>\n      </el-container>\n    </div>\n</template>\n\n<script>\n  import {addorder} from \'../axios/api\'\n  import pageheader from "../components/pageheader";\n  import pagefooter from "../components/pagefooter";\n    export default {\n        name: "userorder",\n      components: {\n        pageheader,\n        pagefooter\n      },\n        data:function(){\n          return{\n            orderitem:[],\n            addrForm:"",\n            uporder:{\n              carIds:[],\n              userId:0,\n              amount:0\n            }\n          }\n        },\n      computed:{\n         countAll(){\n           var count=0;\n             this.orderitem.forEach(data=>{\n               count+=data.buyNum\n           })\n           return count;\n         },\n        costAll(){\n           var cost=0;\n          this.orderitem.forEach(data=>{\n            cost+=  data.book.price*data.book.discount*data.buyNum\n          })\n          return cost;\n        },\n        getCarIds(){\n           var carIds=[];\n          this.orderitem.forEach(data=>{\n            carIds.push(data.carId)\n          })\n          return carIds;\n        }\n      },\n        mounted() {\n          JSON.stringify(this.$route.params.orderlist)\n          let orderlist=[];\n          orderlist=this.$route.params.orderlist\n          orderlist.forEach(data=>{\n            data.book.imgurl=data.book.imgurl.split(",");\n          })\n          this.orderitem=orderlist;\n        },\n      methods:{\n        submitOrder(){\n          this.uporder.carIds=this.getCarIds\n          this.uporder.userId=this.$store.state.user.userId\n           this.uporder.amount=this.costAll\n          console.log(this.uporder)\n          var params=this.uporder;\n          addorder(params).then(res=>{\n            console.log(res.data)\n            this.$message({\n              message:\'下单成功\'\n            })\n              this.$store.commit(\'setUserInfoTag\',\'myorders\');\n              this.$router.push(\'/myorders\')\n          })\n        }\n      }\n    }\n<\/script>\n\n<style scoped>\n.address-form{\n  width: 1226px;\n  padding-bottom: 50px;\n}\n  .address-form .el-form-item >>>.el-input{\n    width: 300px;\n  }\n</style>\n'],sourceRoot:""}])},cXy7:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("mvHQ"),n=o.n(r),a=o("c2Ch"),s=o("0zi8"),l=o("Joay"),i={name:"userorder",components:{pageheader:s.a,pagefooter:l.a},data:function(){return{orderitem:[],addrForm:"",uporder:{carIds:[],userId:0,amount:0}}},computed:{countAll:function(){var e=0;return this.orderitem.forEach(function(t){e+=t.buyNum}),e},costAll:function(){var e=0;return this.orderitem.forEach(function(t){e+=t.book.price*t.book.discount*t.buyNum}),e},getCarIds:function(){var e=[];return this.orderitem.forEach(function(t){e.push(t.carId)}),e}},mounted:function(){n()(this.$route.params.orderlist);var e=[];(e=this.$route.params.orderlist).forEach(function(e){e.book.imgurl=e.book.imgurl.split(",")}),this.orderitem=e},methods:{submitOrder:function(){var e=this;this.uporder.carIds=this.getCarIds,this.uporder.userId=this.$store.state.user.userId,this.uporder.amount=this.costAll,console.log(this.uporder);var t=this.uporder;Object(a.d)(t).then(function(t){console.log(t.data),e.$message({message:"下单成功"}),e.$store.commit("setUserInfoTag","myorders"),e.$router.push("/myorders")})}}},d=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"userorder"}},[o("el-container",{attrs:{direction:"vertical"}},[o("pageheader"),e._v(" "),o("el-main",{staticStyle:{width:"100%"}},[o("h3",[e._v("收货地址")]),e._v(" "),o("el-form",{ref:"addrForm",staticClass:"address-form",attrs:{model:e.addrForm,"status-icon":"",inline:!0}},[o("el-form-item",{attrs:{label:"姓名"}},[o("el-input",{model:{value:e.addrForm.account,callback:function(t){e.$set(e.addrForm,"account",t)},expression:"addrForm.account"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"电话"}},[o("el-input",{model:{value:e.addrForm.userName,callback:function(t){e.$set(e.addrForm,"userName",e._n(t))},expression:"addrForm.userName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"地址"}},[o("el-input",{model:{value:e.addrForm.email,callback:function(t){e.$set(e.addrForm,"email",t)},expression:"addrForm.email"}})],1)],1)],1),e._v(" "),o("el-main",{staticStyle:{width:"100%"}},[o("h3",[e._v("订单详情")]),e._v(" "),o("div",{staticClass:"car",staticStyle:{width:"1266px",margin:"0 auto"}},[o("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.orderitem,"tooltip-effect":"dark"}},[o("el-table-column",{attrs:{label:"商品信息",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:"http://localhost:88/upload/"+t.row.book.imgurl[0]}}),e._v(" "),o("span",[e._v(e._s(t.row.book.iSBN))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"书名|作者","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v("《"+e._s(t.row.book.bookName)+"》| "),o("span",[e._v(e._s(t.row.book.author))])])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"出版社","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(t.row.book.publisher))])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"单价",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.book.price*t.row.book.discount))]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"数量","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.buyNum)+"\n              ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"小计","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.book.price*t.row.book.discount*t.row.buyNum))]}}])})],1),e._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e.orderitem.length,expression:"orderitem.length"}],staticClass:"cart-footer"},[o("div",{staticClass:"cart-footer-desc"},[e._v("\n              共计 "),o("span",[e._v(e._s(e.countAll))]),e._v(" 件商品\n            ")]),e._v(" "),o("div",{staticClass:"cart-footer-desc"},[e._v("\n              应付总额 "),o("span",[e._v("¥ "+e._s(e.costAll))])]),e._v(" "),o("div",{staticStyle:{"margin-top":"20px"}},[o("el-button",{staticClass:"buy-btn",on:{click:e.submitOrder}},[e._v("提价订单")])],1)])],1)]),e._v(" "),o("pagefooter")],1)],1)};d._withStripped=!0;var c={render:d,staticRenderFns:[]},u=c;var m=!1;var p=o("VU/8")(i,u,!1,function(e){m||o("Comq")},"data-v-cf1a4508",null);p.options.__file="src/page/userorder.vue";t.default=p.exports}});
//# sourceMappingURL=8.22f6964c53e6b1fc3dab.js.map